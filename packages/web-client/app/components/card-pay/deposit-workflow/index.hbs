  <h3>{{this.workflow.name}}</h3>
  {{#each this.workflow.milestones as |milestone i|}}
    {{#let (or milestone.complete (lte i this.workflow.activeMilestoneIndex)) as |displayMilestone|}}
      {{#if displayMilestone}}
        {{#each milestone.postables as |postable j|}}
          <div class="thread-message" data-test-thread-message={{j}} data-test-milestone={{i}}>
            <div data-test-author>
              {{postable.author.name}}
            </div>
            {{#if postable.message}}
              {{format-workflow-message postable.message}}
            {{else}}
              {{component postable.componentName onComplete=(optional postable.onComplete)}}
            {{/if}}
          </div>
        {{/each}}
        {{#if milestone.isComplete}}
          <p data-test-milestone-completed data-test-milestone={{i}}>Milestone completed: {{milestone.completedDetail}}</p>
        {{/if}}
      {{/if}}

      {{#if (and milestone.messageOnCompletion this.workflow.displayCompletionMessage)}}
        <p>{{milestone.messageOnCompletion}}</p>
      {{/if}}
    {{/let}}
  {{/each}}
