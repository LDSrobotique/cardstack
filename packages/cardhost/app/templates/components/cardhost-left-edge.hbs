<aside
  id="cardhost-left-edge"
  class="cardhost-left-edge"
  data-test-cardhost-left-edge
>
  <nav
    class="cardhost-left-edge--nav {{if this.isExpanded "expanded"}}"
  >
    <ul>
      <li class="login-grid">
        <button
          class="ch-button ch-button--icon-secondary button-cardstack-logo"
          aria-label="expandable menu with login controls"
          aria-expanded={{this.isExpanded}}
          {{on "click" this.toggleMenuExpand}}
          data-test-toggle-left-edge
        >
          {{svg-jar "cardstack-logo" width="18px" height="20px"}}
        </button>
        {{#if this.isExpanded}}
          <div
            class="login-grid-right-column"
            {{did-insert this.registerCloseListener}}
            {{will-destroy this.destroyCloseListener}}
          >
            <h1>Cardstack Builder</h1>
            <CardstackSession as |session|>
              {{#if session.isAuthenticated }}
                <button
                  {{on "click" (fn this.logout session.logout)}}
                  class="cardhost-left-edge-login-buttons"
                  data-test-logout-button
                >
                  Log out
                </button>
              {{else}}
                <MockLogin as |login|>
                  <button
                    {{on "click" (fn login "user1")}}
                    class="cardhost-left-edge-login-buttons"
                    data-test-login-button
                  >
                    Log in
                  </button>
                </MockLogin>
              {{/if}}
            </CardstackSession>
          </div>
        {{/if}}
      </li>
      <li>
        <button disabled class="catalog ch-button ch-button--icon-secondary" aria-label="catalog">
          {{svg-jar "catalog" width="18px" height="20px"}}
        </button>
      </li>
      <li>
        <LinkTo
          @route="index"
          data-test-library-link
          class="ch-button ch-button--icon-secondary"
          title="Library"
        >
          {{svg-jar "library" width="20px" height="38px"}}
        </LinkTo>
      </li>
    </ul>
  </nav>

  {{#if (or (eq @mode "schema") (eq @mode "adopt"))}}
    <section class="ch-catalog">
      <header class="ch-catalog--header">
        <h3 class="ch-catalog--title">Card Catalog</h3>
      </header>
      <div class="ch-catalog--content" tabindex="0" >
        <div class="ch-catalog--fields">
          {{#each this.fieldComponents as |field|}}
            <div
              class="ch-catalog-field"
              role="button"
              draggable="true"
              {{on "mousedown" (action this.initDrag field)}}
              {{on "dragend" (action (mut this.isDragging) false)}}
              {{on "dragstart" (action this.startDragging field)}}
              data-test-card-add-field-draggable={{field.type}}
            >
              {{! template-lint-disable no-inline-styles}}
              <div class="ch-catalog-field--icon" style={{css-url "background-image" field.icon}}></div>
              <div>
                <h4 class="ch-catalog-field--title">{{field.title}}</h4>
                {{#if field.description}}
                  <p class="ch-catalog-field--description">{{field.description}}</p>
                {{/if}}
              </div>
            </div>
          {{/each}}
        </div>
      </div>
    </section>
  {{/if}}

  {{yield}}
</aside>