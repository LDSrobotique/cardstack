{{#if tools.activeContentItem}}
  {{#overlay-marks group="cardstack-fields" as |mark|}}
    {{! template-lint-disable attribute-indentation }}
    {{#let
      mark.model.name
      mark.model.content
      mark.model.caption
      (eq mark.id tools.openedFieldId)
      (eq mark.id tools.detailedViewFieldId)
      (cs-field-editor-for mark.model.content mark.model.name variant="inline")
    as |fieldName content caption isOpenedField isDetailedViewField editorName|}}
      {{#let (is-component editorName) as |hasInlineEditor|}}
        <div hidden=true onclick={{action "openField" mark}} data-test-overlay-button={{dasherize fieldName}}>
          {{!-- This is here for testing --}}
        </div>
        {{#create-overlay
          at=mark
          label=caption
          highlighted=(eq mark.id tools.highlightedFieldId)
          hoverable=tools.active
          class=(concat "cs-field-overlay "
            (if hasInlineEditor "with-inline-editor ")
            (if (and isOpenedField (not hasInlineEditor)) "passthrough"))
          focused=(or isOpenedField isDetailedViewField)
          onclick=(action "openField" mark)
          dismiss=(action "openField" null)
          data-test-cs-field-overlay=(dasherize fieldName)
        }}
          {{#if (and isOpenedField (not mark.model.grouped)) }}
            {{#if hasInlineEditor}}
              {{component editorName content=content field=fieldName enabled=true tagName=""}}
            {{/if}}
          {{/if}}
        {{/create-overlay}}
      {{/let}}
    {{/let}}
  {{/overlay-marks}}

  {{#overlay-marks group="cardstack-content" as |mark|}}
    {{create-overlay
      at=mark
      label=(cs-humanize (cs-model-type mark.model))
      highlighted=false
      hoverable=tools.active
      class="cs-content-overlay"
      onclick=(action "navigateToCard" mark.model)
    }}
  {{/overlay-marks}}
{{/if}}