{{#if this.cardstackSession.isAuthenticated}}
  <CardstackEdge @edge="top" @componentToShow={{component "cardhost-top-edge" mode="schema" card=this.card}}>
    <InTopToolbar />
  </CardstackEdge>
{{/if}}

<CardstackEdge @edge="left" @componentToShow={{component "cardhost-left-edge" mode="schema"}}>
  <InLeftToolbar/>
</CardstackEdge>

<CardstackEdge
  @edge="right"
  @componentToShow={{component "right-edge"
    mode="schema"
    card=this.card
    selectedField=this.selectedField
    selectField=(action this.selectField)
    setNeededWhenEmbedded=this.setNeededWhenEmbedded
    setFieldName=this.setFieldName
    setFieldLabel=this.setFieldLabel
    setFieldInstructions=this.setFieldInstructions
    cardSelected=this.cardSelected
  }}>
  <InRightToolbar/>
</CardstackEdge>

{{!-- <RightEdge
  @card={{this.card}}
  @mode="schema"
  @selectedField={{this.selectedField}}
  @selectField={{action this.selectField}}
  @setNeededWhenEmbedded={{this.setNeededWhenEmbedded}}
  @setFieldName={{this.setFieldName}}
  @setFieldLabel={{this.setFieldLabel}}
  @setFieldInstructions={{this.setFieldInstructions}}
  @updateCardId={{this.updateCardId}}
  @cardSelected={{this.cardSelected}}
/> --}}

<section class="card-creator" data-test-card-creator {{did-update this.updateCard @card}}>
  {{#if this.card}}
    <CardRenderer
      @card={{this.card}}
      @format="isolated"
      @mode="schema"
      @removeField={{action this.removeField}}
      @setPosition={{action this.setPosition}}
      @selectField={{action this.selectField}}
      @selectedField={{this.selectedField}}
      @dropField={{action this.dropField}}
      @cardSelected={{this.cardSelected}}
      @cardFocused={{action (mut this.cardSelected)}}
    />
  {{/if}}
</section>

{{#if this.card}}
  {{!-- This is hidden, used in tests --}}
  <section class="cardhost-card-document">
    <h3>Card Document</h3>
    <code data-test-card-json>{{this.cardJson}}</code>
  </section>
{{/if}}