<h2 data-test-card-updator={{this.args.cardId}}>Update Card: <code>{{this.args.cardId}}</code></h2>
<p>
  <em><code>HUB_ENVIRONMENT=test</code> environment variable must be set on the hub instance in order to provide session that allows this test to write to the hub.</em>
</p>

[[TODO add controls to add/remove metadata fields...]]<br>
[[TODO add controls to change card model fields]]<br>

{{#unless this.card}}
  <div><strong>Card was not found</strong></div>
{{/unless}}

{{#if this.statusMsg}}
  <div><strong>{{this.statusMsg}}</strong></div>
{{/if}}

<CardInspector @card={{this.cardData}}></CardInspector>

<div>
  <button {{on "click" this.update}} data-test-card-updator-update-btn>Update Card</button>
  <span data-test-card-updator-is-dirty={{this.isDirtyStr}}>
    {{#if this.isDirty}}(unsaved){{/if}}
  </span>
</div>
<br>

<IvyCodemirror
  @value={{this.card}}
  @valueUpdated={{action (mut this.editingCard)}}
  @options={{hash
    lineNumbers=true
    mode="javascript"
  }}
>
</IvyCodemirror>