const JSONAPIFactory = require('@cardstack/test-support/jsonapi-factory');
module.exports = function({sourceId, packageName}) {
  // TODO the dataSource.id is actually being passed in
  // Person Card Schema
  let factory = new JSONAPIFactory(sourceId, packageName);
  factory.addResource('card-definitions')
    .withRelated('model', factory.addResource('content-types', 'people')
      .withAttributes({ name: 'people' })
      .withRelated('fields', [
        factory.addResource('fields', 'name').withAttributes({
          name: 'name',
          'is-metadata': true,
          'needed-when-embedded': true,
          'field-type': '@cardstack/core-types::string'
        }),
        factory.addResource('fields', 'password').withAttributes({
          name: 'password',
          'field-type': '@cardstack/core-types::string'
        }),
      ])
    );
  factory.addResource(`${sourceId}::${packageName}::people`);
  return factory.getModels(); // intentionally not getting just the card-definitions related models
};