<section class="card-view" data-test-card-view={{this.card.canonicalURL}}
  data-test-card-patched={{stringify this.patchCard.isIdle}}
  data-test-themer-loaded={{stringify this.isCardReady}}
>
  <CardRenderer
    @card={{@card}}
    @format="isolated"
    @mode="view"
    @class="themer"
    @cardSelected={{false}}
    @cardLoaded={{perform this.waitForCss}}
  />
</section>

{{#if this.isCardReady}}
  <div data-test-editor-pane>
    <EditorPane data-test-dock-location={{this.cssModeToggle.dockLocation}}
      @css={{this.isolatedCss}}
      @card={{@card}}
      @updateCode={{this.updateCss}}
    />
  </div>
{{/if}}

<style data-test-view-css>
  {{scope-css this.isolatedCss (concat (safe-css-string @card.canonicalURL) "--isolated")}}
</style>