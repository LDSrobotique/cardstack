This is a Cardstack data source plugin for reading and writing to Git.

Building native nodegit dep on osx
--------------------------------

You need the latest Xcode *and* you need to manually tell it to get the latest CLI tools via

    sudo xcode-select --install
    
Merely upgrading Xcode will still leave you broken and frustrated.

I cloned and built nodegit in its own repo, and then used `yarn link`. This seems to function as insurance against `yarn` deciding to rebuild it from scratch (which takes a long time).

___Mac OS X Mojave users beware:___ nodegit does not appear to be compatible with the newer style OpenSSH keys that are generated by default from `ssh-keygen`. When generating ssh keys make sure to specify `-m PEM` in the `ssh-keygen` command in order to generate the older style PEM keypair. If you encounter the error: 
```
Error: Failed to authenticate SSH session: Unable to extract public key from private key.
```
Then it is likely because you are generating the newer style OpenSSH keypair.

The older PEM style private keys (that are compatible with nodegit) are identifable by having a private key preamble that begins with:
```
-----BEGIN RSA PRIVATE KEY-----
```
More information is detailed here: https://github.com/nodegit/nodegit/issues/1606.

In order to use the private key as an env var in TravisCI you will need to replace the newlines in the private key. This issue describes this more in detail: https://github.com/travis-ci/travis-ci/issues/7715#issuecomment-362536708. You can use the following perl script to convert newlines into `\n` from the private key file and write to stdout:

```
$ perl -p -e 's/\n/\\n/' ~/.ssh/my-private-key_id_rsa
```

Then in Travis you can specify the env var in the following in manner within the Travis env var text field for the newlines to be converted correctly. Note that the `"` and `'` characters are very critical:
```
"$(echo -e '-----BEGIN RSA PRIVATE KEY-----\nMKOQ1zYTmd\nzkRpTFq4xu\n-----END RSA PRIVATE KEY-----\n')"
```
